{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ConsultarLibrosComponent = class ConsultarLibrosComponent {\n  constructor(libroService, editorialService) {\n    this.libroService = libroService;\n    this.editorialService = editorialService;\n    this.searchTitle = '';\n    this.searchAuthor = '';\n    this.searchClassification = 'Clasificacion';\n    this.librosFiltrados = [];\n  }\n  ngOnInit() {\n    //console.log(this.empleadoService.getEmpleados());\n    this.getLibros();\n    this.getEditorial();\n  }\n  performSearch() {\n    this.librosFiltrados = this.libroService.libros.filter(libro => {\n      const coincideTitulo = libro.titulo.toLowerCase().includes(this.searchTitle.toLowerCase());\n      const coincideAutor = libro.autores.toLowerCase().includes(this.searchAuthor.toLowerCase());\n      const coincideClasificacion = this.searchClassification === 'Clasificacion' || libro.clasificacion === this.searchClassification;\n      return coincideTitulo && coincideAutor && coincideClasificacion;\n    });\n  }\n  getEditorial() {\n    this.editorialService.getEditorial().subscribe(res => {\n      this.editorialService.editoriales = res;\n      console.log(res);\n    }, err => console.log(err));\n  }\n  getLibros() {\n    this.libroService.getLibro().subscribe(res => {\n      this.libroService.libros = res;\n      console.log(res);\n    }, err => console.log(err));\n  }\n  deleteLibro(_id) {\n    alert('Borrando');\n    const resp = confirm('Estas seguro de eliminarlo?');\n    console.log('eliminando ' + _id);\n    if (resp) {\n      this.libroService.deleteLibro(_id).subscribe(res => {\n        this.getLibros();\n      }, err => console.log(err));\n    }\n  }\n  addLibro(libro) {\n    this.libroService.libro = libro;\n  }\n};\nConsultarLibrosComponent = __decorate([Component({\n  selector: 'app-consultar-libros',\n  templateUrl: './consultar-libros.component.html',\n  styleUrls: ['./consultar-libros.component.css']\n})], ConsultarLibrosComponent);\nexport { ConsultarLibrosComponent };","map":{"version":3,"names":["Component","ConsultarLibrosComponent","constructor","libroService","editorialService","searchTitle","searchAuthor","searchClassification","librosFiltrados","ngOnInit","getLibros","getEditorial","performSearch","libros","filter","libro","coincideTitulo","titulo","toLowerCase","includes","coincideAutor","autores","coincideClasificacion","clasificacion","subscribe","res","editoriales","console","log","err","getLibro","deleteLibro","_id","alert","resp","confirm","addLibro","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\BIBLIOTEC\\bibliotecV3\\src\\app\\componentes\\consultar-libros\\consultar-libros.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ConsultaService } from 'src/app/services/consulta.service';\nimport { Libro } from 'src/app/models/libro';\nimport { libroService } from 'src/app/services/libro.service';\nimport { EditorialService } from 'src/app/services/editorial.service';\nimport { OnInit } from '@angular/core';\n\n\n\n@Component({\n  selector: 'app-consultar-libros',\n  templateUrl: './consultar-libros.component.html',\n  styleUrls: ['./consultar-libros.component.css']\n})\nexport class ConsultarLibrosComponent implements OnInit{\n\n  searchTitle: string = '';\n  searchAuthor: string = '';\n  searchClassification: string = 'Clasificacion';\n\n  librosFiltrados: Libro[] = [];\n\n  constructor(public libroService:libroService, public editorialService:EditorialService) { }\n\n  ngOnInit(): void {\n    //console.log(this.empleadoService.getEmpleados());\n    this.getLibros();\n    this.getEditorial();\n  }\n\n  performSearch(){\n    this.librosFiltrados = this.libroService.libros.filter(libro => {\n      const coincideTitulo = libro.titulo.toLowerCase().includes(this.searchTitle.toLowerCase());\n      const coincideAutor = libro.autores.toLowerCase().includes(this.searchAuthor.toLowerCase());\n      const coincideClasificacion = this.searchClassification === 'Clasificacion' || libro.clasificacion === this.searchClassification;\n\n      return coincideTitulo && coincideAutor && coincideClasificacion;\n    })\n  }\n\n  getEditorial(){\n    this.editorialService.getEditorial().subscribe(\n      res => {\n        this.editorialService.editoriales= res;\n        console.log(res);\n      },\n      err => console.log(err)\n    )\n  }\n\n  getLibros(){\n    this.libroService.getLibro().subscribe(\n      res => {\n        this.libroService.libros= res;\n        console.log(res);\n      },\n      err => console.log(err)\n    )\n  }\n\n \n  \n \n \n\n  deleteLibro(_id:any){\n    alert('Borrando');\n     const resp= confirm('Estas seguro de eliminarlo?');\n     console.log('eliminando '+_id);\n     if(resp){\n       this.libroService.deleteLibro(_id).subscribe(\n        res=>{\n          this.getLibros();\n        },\n        (err)=> console.log(err)\n       );\n     }\n  }\n\n  addLibro(libro:Libro){\n    this.libroService.libro= libro;\n  }\n\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAczC,IAAaC,wBAAwB,GAArC,MAAaA,wBAAwB;EAQnCC,YAAmBC,YAAyB,EAASC,gBAAiC;IAAnE,KAAAD,YAAY,GAAZA,YAAY;IAAsB,KAAAC,gBAAgB,GAAhBA,gBAAgB;IANrE,KAAAC,WAAW,GAAW,EAAE;IACxB,KAAAC,YAAY,GAAW,EAAE;IACzB,KAAAC,oBAAoB,GAAW,eAAe;IAE9C,KAAAC,eAAe,GAAY,EAAE;EAE6D;EAE1FC,QAAQA,CAAA;IACN;IACA,IAAI,CAACC,SAAS,EAAE;IAChB,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAC,aAAaA,CAAA;IACX,IAAI,CAACJ,eAAe,GAAG,IAAI,CAACL,YAAY,CAACU,MAAM,CAACC,MAAM,CAACC,KAAK,IAAG;MAC7D,MAAMC,cAAc,GAAGD,KAAK,CAACE,MAAM,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,IAAI,CAACd,WAAW,CAACa,WAAW,EAAE,CAAC;MAC1F,MAAME,aAAa,GAAGL,KAAK,CAACM,OAAO,CAACH,WAAW,EAAE,CAACC,QAAQ,CAAC,IAAI,CAACb,YAAY,CAACY,WAAW,EAAE,CAAC;MAC3F,MAAMI,qBAAqB,GAAG,IAAI,CAACf,oBAAoB,KAAK,eAAe,IAAIQ,KAAK,CAACQ,aAAa,KAAK,IAAI,CAAChB,oBAAoB;MAEhI,OAAOS,cAAc,IAAII,aAAa,IAAIE,qBAAqB;IACjE,CAAC,CAAC;EACJ;EAEAX,YAAYA,CAAA;IACV,IAAI,CAACP,gBAAgB,CAACO,YAAY,EAAE,CAACa,SAAS,CAC5CC,GAAG,IAAG;MACJ,IAAI,CAACrB,gBAAgB,CAACsB,WAAW,GAAED,GAAG;MACtCE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAClB,CAAC,EACDI,GAAG,IAAIF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC,CACxB;EACH;EAEAnB,SAASA,CAAA;IACP,IAAI,CAACP,YAAY,CAAC2B,QAAQ,EAAE,CAACN,SAAS,CACpCC,GAAG,IAAG;MACJ,IAAI,CAACtB,YAAY,CAACU,MAAM,GAAEY,GAAG;MAC7BE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAClB,CAAC,EACDI,GAAG,IAAIF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC,CACxB;EACH;EAOAE,WAAWA,CAACC,GAAO;IACjBC,KAAK,CAAC,UAAU,CAAC;IAChB,MAAMC,IAAI,GAAEC,OAAO,CAAC,6BAA6B,CAAC;IAClDR,OAAO,CAACC,GAAG,CAAC,aAAa,GAACI,GAAG,CAAC;IAC9B,IAAGE,IAAI,EAAC;MACN,IAAI,CAAC/B,YAAY,CAAC4B,WAAW,CAACC,GAAG,CAAC,CAACR,SAAS,CAC3CC,GAAG,IAAE;QACH,IAAI,CAACf,SAAS,EAAE;MAClB,CAAC,EACAmB,GAAG,IAAIF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC,CACxB;;EAEN;EAEAO,QAAQA,CAACrB,KAAW;IAClB,IAAI,CAACZ,YAAY,CAACY,KAAK,GAAEA,KAAK;EAChC;CAGD;AAtEYd,wBAAwB,GAAAoC,UAAA,EALpCrC,SAAS,CAAC;EACTsC,QAAQ,EAAE,sBAAsB;EAChCC,WAAW,EAAE,mCAAmC;EAChDC,SAAS,EAAE,CAAC,kCAAkC;CAC/C,CAAC,C,EACWvC,wBAAwB,CAsEpC;SAtEYA,wBAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}